###################################
# CART SYSTEM TYPES + INPUTS
###################################

type CartItem {
  id: ID!
  productId: ID!
  variantId: ID
  quantity: Int!
  unitPrice: Float!
  createdAt: String!
  updatedAt: String!
}

type Cart {
  id: ID!
  userId: ID
  items: [CartItem!]!
  totalAmount: Float!
  createdAt: String!
  updatedAt: String!
}

input AddToCartInput {
  cartId: ID
  productId: ID!
  variantId: ID
  quantity: Int!
}

input RemoveCartItemInput {
  cartId: ID!
  cartItemId: ID!
}

input ClearCartInput {
  cartId: ID!
}

input AttachCartToUserInput {
  cartId: ID!
  userId: ID!
} 

type AddToCartPayload {
  cart: Cart!
}

type RemoveCartItemPayload {
  cart: Cart!
}

type ClearCartPayload {
  cart: Cart!
}

type AttachCartToUserPayload {
  cart: Cart!
}

extend type Query {
  getCart(cartId: ID, forUser: Boolean = false): Cart!
}

extend type Mutation {
  addToCart(input: AddToCartInput!): AddToCartPayload!
  removeCartItem(input: RemoveCartItemInput!): RemoveCartItemPayload!
  clearCart(input: ClearCartInput!): ClearCartPayload!
  attachCartToUser(input: AttachCartToUserInput!): AttachCartToUserPayload!
}
